/* STUDY WITH MIKU
    CORE FUNCTION
   V0.6 2023.08.01 */
$(function() {
    util.init();
});
var util = 	{
init: function(){
    $(window).resize(util.videoresize);
	$("#bt_fs").fadeIn(300, "linear");
    $("#scene_top").fadeIn(300,"linear");
    // $(".ok").fadeIn(300, "linear");
    
    $("#bt_fs").on('click', function(){util.fullscreen()});

    $("#btt_start").on('click', util.study);

    $("#btt_setting").on('click', function(){util.menuopen("menu")});

    $("#btt_about").on('click', function(){util.menuopen("about")});
    $("#bt_rest").on('click', function(){util.menuopen("rest");$('.aplayer-pause').trigger('click');$('#bt_restclose').on('click',function(){$('.aplayer-play').trigger('click')});$("#bt_musicswitch").on('click', function(){$(".aplayer-button").trigger("click")});});

    $("#about_cover").on('click', function(){$("#about").fadeOut(300, "linear");$("#about_cover").fadeOut(300, "linear");$("#scene_top").fadeIn(300,"linear");$(".ok").fadeIn(300, "linear");});

},
menuopen: function (e){
    $("#"+e).fadeIn(300, "linear");
    $("#"+e+"_cover").fadeIn(300, "linear");
    $("#bt_"+e+"close").on('click', function(){
        $("#"+e).fadeOut(300, "linear");
        $("#"+e+"_cover").fadeOut(300, "linear");
    });
},
study: function (){
    $('.aplayer-play').trigger('click');
    $("#scene_top").fadeOut(300,"linear");
    $("#scene_learning").fadeIn(300, "linear");
    $("#bt_rest").fadeIn(300, "linear");
    util.videoresize();
    util.timer();

    $("#bt_stop").on('click', function(){
        $('.aplayer-pause').trigger('click');
        $("#scene_top").fadeIn(300,"linear");
        $(".ok").fadeIn(300, "linear");
        $("#scene_learning").fadeOut(300, "linear");
        $("#bt_rest").fadeOut(300, "linear");
        $("#rest").fadeOut(300, "linear");
        $("#rest_cover").fadeOut(300, "linear");
    });
},
timerecord: function (){

},
timer: function(){
    var hour = minutes = seconds = 0,
        studytime = $("#time"),
        pastsDate = sDate = pastmDate = mDate = pasthDate = hDate = 0;
    setInterval(function(){
        var myDate = new Date;
        sDate=myDate.getSeconds();
        mDate=myDate.getMinutes();
        hDate=myDate.getHours();
        if(sDate-pastsDate>=1||mDate-pastmDate>=1||hDate-pasthDate>=1)
        {
            seconds++;
        }
        if( seconds == 60 ){
            minutes++;
            seconds = 0;
        }
        if( minutes == 60 ){
            hour++;
            minutes = 0;
        }

        if(minutes=='0'&&hour=='0'){
            studytime.text(seconds+"秒钟啦！继续加油吧！");
        }else if(hour!='0'){
            studytime.text(hour+"小时"+minutes+"分钟"+seconds+"秒啦！好厉害！！！");
        }else{
            studytime.text(minutes+"分钟"+seconds+"秒啦！超棒！");
        }
        pastsDate=sDate;
        pastmDate=mDate;
        pasthDate=hDate;
    },1000);
},
readstoragetime: function(){

},
writestoragetime: function(){

},
videoresize: function (){
    var ww=$(window).width(),
        wh=$(window).height(),
        vw=$("video").width(),
        vh=$("video").height();
    if(ww*0.5625>=wh)
    {
        $("video").css("height","auto").css("width",ww).css("top",wh/2-$("video").height()/2).css("left","0");
        // console.log("wh:"+wh+"vh:"+$("video").height());
        // console.log("top:"+wh/2-$("video").height()/2);
    }else{
        $("video").css("height",wh).css("width","auto").css("left",ww/2-$("video").width()/2).css("top","0");
        // console.log("ww:"+ww+"vw:"+$("video").width());
        // console.log("left:"+ww/2-$("video").width()/2);
    }
},
fullscreen: function(e) {
    util.checkFullscreen() ? document.webkitCancelFullScreen ? document.webkitCancelFullScreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.msExitFullscreen ? document.msExitFullscreen() : document.cancelFullScreen ? document.cancelFullScreen() : document.exitFullscreen && document.exitFullscreen() : (e ? "string" == typeof e && (e = document.getElementById(e)) : e = document.body, e.webkitRequestFullscreen ? e.webkitRequestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.msRequestFullscreen ? e.msRequestFullscreen() : e.requestFullscreen && e.requestFullscreen())
},
checkFullscreen: function() {
    return !!(document.webkitFullscreenElement || document.mozFullScreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.fullscreenElement)
}}


console.log("\n %c Study With Miku V0.6 %c 在干什么呢(・∀・(・∀・(・∀・*) \n", "color: #fadfa3; background: #030307; padding:5px 0;", "background: #fadfa3; padding:5px 0; color: #000")
